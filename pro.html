<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TRIPLUS 1 HOUSE OF FASHION</title>
<!-- Google Material Icons -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
<style>
  /* Modern Web Design Standards */
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    font-family: 'Inter', sans-serif;
    background: linear-gradient(135deg, #7c3aed, #3b82f6);
    color: #fff;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    overflow-x: hidden;
  }

  header {
    background: rgba(39, 39, 42, 0.9);
    backdrop-filter: blur(12px);
    padding: 1rem 2rem;
    position: sticky;
    top: 0;
    z-index: 1000;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  header .logo {
    font-weight: 700;
    font-size: 1.5rem;
    background: linear-gradient(45deg, #c084fc, #14b8a6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    user-select: none;
  }

  nav .material-icons {
    cursor: pointer;
    font-size: 2rem;
    vertical-align: middle;
  }

  main {
    flex-grow: 1;
    padding: 2rem;
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
  }

  .hidden {
    display: none !important;
  }

  /* Auth forms styling */

  .auth-container {
    max-width: 400px;
    margin: 5rem auto;
    background: rgba(255 255 255 / 0.07);
    padding: 2rem;
    border-radius: 16px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.25);
  }

  .auth-container h2 {
    margin-bottom: 1.5rem;
    font-weight: 700;
    text-align: center;
    font-size: 1.75rem;
  }

  label {
    display: block;
    margin-bottom: 0.25rem;
    font-weight: 600;
    font-size: 0.9rem;
  }

  input[type="email"],
  input[type="password"],
  input[type="text"] {
    width: 100%;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    border: none;
    border-radius: 12px;
    margin-bottom: 1rem;
    background: rgba(255 255 255 / 0.15);
    color: white;
    transition: background-color 0.3s ease;
  }

  input[type="email"]:focus,
  input[type="password"]:focus,
  input[type="text"]:focus {
    background: rgba(255 255 255 / 0.28);
    outline: none;
  }

  button {
    width: 100%;
    padding: 0.85rem;
    font-weight: 700;
    font-size: 1rem;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    color: #fff;
    background: linear-gradient(135deg, #a78bfa, #14b8a6);
    box-shadow: 0 8px 20px rgba(101, 52, 255, 0.35);
    transition: all 0.3s ease;
  }

  button:hover, button:focus {
    background: linear-gradient(135deg, #8533ff, #0d9182);
    box-shadow: 0 10px 30px rgba(101, 52, 255, 0.6);
  }

  .toggle-auth {
    margin-top: 1rem;
    text-align: center;
    font-size: 0.9rem;
  }

  .toggle-auth a {
    color: #c4b5fd;
    cursor: pointer;
    text-decoration: underline;
  }

  .error-message {
    color: #ff6b6b;
    font-weight: 600;
    margin-bottom: 1rem;
    text-align: center;
  }

  /* Products Grid */

  .products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(280px,1fr));
    gap: 2rem;
  }

  .product-card {
    background: rgba(255 255 255 / 0.05);
    border-radius: 20px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.3);
    padding: 1rem;
    display: flex;
    flex-direction: column;
    transition: transform 0.3s ease;
  }

  .product-card:hover {
    transform: translateY(-6px);
  }

  .product-image {
    width: 100%;
    aspect-ratio: 3 / 4;
    border-radius: 16px;
    object-fit: cover;
    margin-bottom: 1rem;
    box-shadow: 0 4px 15px rgba(124, 58, 237, 0.35);
  }

  .product-name {
    font-weight: 700;
    font-size: 1.2rem;
    margin-bottom: 0.4rem;
    color: #e0e7ff;
  }

  .product-desc {
    flex-grow: 1;
    font-size: 0.95rem;
    color: #cbd5e1;
    margin-bottom: 0.8rem;
  }

  .product-price {
    font-weight: 700;
    font-size: 1.1rem;
    color: #c084fc;
    margin-bottom: 0.6rem;
  }

  .enquiry-button {
    align-self: stretch;
    padding: 0.7rem;
    border-radius: 12px;
    border: none;
    background: #7c3aed;
    color: #f3f4f6;
    font-weight: 700;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .enquiry-button:hover, .enquiry-button:focus {
    background: #5b21b6;
  }

  /* Enquiry modal */

  .modal-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
  }

  .modal {
    width: 90%;
    max-width: 480px;
    background: rgba(255 255 255 / 0.1);
    padding: 2rem;
    border-radius: 24px;
    box-shadow: 0 8px 30px rgba(124, 58, 237, 0.6);
    position: relative;
    color: #fff;
    backdrop-filter: blur(20px);
  }

  .modal h3 {
    margin-top: 0;
    margin-bottom: 1rem;
    font-weight: 700;
  }

  .modal label {
    color: #ddd6fe;
  }

  .modal textarea {
    width: 100%;
    min-height: 100px;
    margin-bottom: 1rem;
    padding: 1rem;
    border-radius: 16px;
    border: none;
    background: rgba(255 255 255 / 0.15);
    color: #e0e7ff;
    resize: vertical;
    font-size: 1rem;
  }

  .modal textarea:focus {
    background: rgba(255 255 255 / 0.3);
    outline: none;
  }

  .modal-close {
    position: absolute;
    top: 12px;
    right: 12px;
    background: transparent;
    border: none;
    color: #c084fc;
    font-size: 2rem;
    cursor: pointer;
  }

  /* User info & logout button */

  .user-info {
    display: flex;
    align-items: center;
    gap: 1rem;
    font-weight: 600;
  }

  .btn-logout {
    background: #db2777;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    padding: 0.4rem 1rem;
    font-weight: 700;
    color: white;
    transition: background-color 0.3s ease;
  }

  .btn-logout:hover, .btn-logout:focus {
    background: #be185d;
  }

  /* Responsive */

  @media (max-width: 480px) {
    .auth-container {
      margin: 3rem 1rem;
    }
  }
</style>
</head>
<body>
<header>
  <div class="logo" aria-label="Fashion website logo">WELCOME TO TRIPLUS 1 HOUSE OF FASHION</div><hr>
  <nav id="nav-user" class="hidden" aria-live="polite">
    <span class="user-info" id="user-info"></span>
    <button class="btn-logout" id="logout-btn" aria-label="Logout">Logout</button>
  </nav>
</header>
<main>

  <!-- User Registration & Login Forms -->
  <section id="auth-section" class="auth-container" aria-live="polite" aria-label="User authentication forms">

    <form id="register-form" class="auth-form" aria-hidden="false" autocomplete="off" novalidate>
      <h2>Create Account</h2>
      <div class="error-message" id="register-error" role="alert" aria-live="assertive"></div>
      <label for="register-name">Name</label>
      <input type="text" id="register-name" name="name" required autocomplete="name" />
      <label for="register-email">Email</label>
      <input type="email" id="register-email" name="email" required autocomplete="email" />
      <label for="register-password">Password</label>
      <input type="password" id="register-password" name="password" required autocomplete="new-password" minlength="6" />
      <button type="submit">Register</button>
      <div class="toggle-auth">
        Already have an account? <a href="#" id="show-login">Log in</a>
      </div>
    </form>

    <form id="login-form" class="auth-form hidden" aria-hidden="true" autocomplete="off" novalidate>
      <h2>Log In</h2>
      <div class="error-message" id="login-error" role="alert" aria-live="assertive"></div>
      <label for="login-email">Email</label>
      <input type="email" id="login-email" name="email" required autocomplete="email" />
      <label for="login-password">Password</label>
      <input type="password" id="login-password" name="password" required autocomplete="current-password" />
      <button type="submit">Login</button>
      <div class="toggle-auth">
        Need an account? <a href="#" id="show-register">Register</a>
      </div>
    </form>

  </section>

  <!-- Front Page with Products -->
  <section id="products-section" class="hidden" aria-label="Product catalog">
    <h2 style="text-align:center; margin-bottom:2rem; font-weight:700; color:#ede9fe;">Explore Our Latest Fashion</h2>
    <div class="products-grid" id="products-grid" role="list"></div>
  </section>

  <!-- Enquiry Modal -->
  <div id="enquiry-modal-backdrop" class="modal-backdrop hidden" role="dialog" aria-modal="true" aria-labelledby="enquiry-modal-title">
    <div class="modal">
      <button class="modal-close" aria-label="Close enquiry form" id="modal-close-btn">&times;</button>
      <h3 id="enquiry-modal-title">Product Enquiry</h3>
      <p id="enquiry-product-name" style="font-weight:600; margin-bottom:1rem;"></p>
      <form id="enquiry-form" novalidate>
        <label for="enquiry-message">Your message</label>
        <textarea id="enquiry-message" name="message" required minlength="10" placeholder="Ask about sizes, availability, or anything else..."></textarea>
        <div class="error-message" id="enquiry-error" role="alert" aria-live="assertive"></div>
        <button type="submit">Send Enquiry</button>
      </form>
    </div>
  </div>

</main>

<script>
  // Utility to get/set users in localStorage
  const STORAGE_USERS_KEY = 'fashion_users';
  const STORAGE_LOGGED_USER_KEY = 'fashion_logged_in_user';
  const STORAGE_ENQUIRIES_KEY = 'fashion_enquiries';

  // Load users array from storage (or empty array)
  function getStoredUsers() {
    return JSON.parse(localStorage.getItem(STORAGE_USERS_KEY) || '[]');
  }
  // Save users array to storage
  function setStoredUsers(users) {
    localStorage.setItem(STORAGE_USERS_KEY, JSON.stringify(users));
  }

  // Save logged-in user (minimal info) to storage
  function setLoggedInUser(user) {
    localStorage.setItem(STORAGE_LOGGED_USER_KEY, JSON.stringify(user));
  }
  function getLoggedInUser() {
    return JSON.parse(localStorage.getItem(STORAGE_LOGGED_USER_KEY) || 'null');
  }
  function clearLoggedInUser() {
    localStorage.removeItem(STORAGE_LOGGED_USER_KEY);
  }

  // Save enquiries to storage
  function getStoredEnquiries() {
    return JSON.parse(localStorage.getItem(STORAGE_ENQUIRIES_KEY) || '[]');
  }
  function setStoredEnquiries(enquiries) {
    localStorage.setItem(STORAGE_ENQUIRIES_KEY, JSON.stringify(enquiries));
  }

  // Simple hashing function for password demonstration (not secure in production)
  function simpleHash(str) {
    // FNV-1a 32-bit hash for demo
    let hash = 2166136261;
    for (let i = 0; i < str.length; i++) {
      hash ^= str.charCodeAt(i);
      hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);
    }
    return (hash >>> 0).toString(16);
  }

  // Sample products defined here (match requirements)
  const products = [
    {
      id: 'prod1',
      name: 'Elegant Evening Dress',
      description: 'A stunning evening dress perfect for special occasions.',
      price: 149.99,
      images: [
        'https://placehold.co/600x800/7c3aed/ffffff?text=Elegant+Evening+Dress+Front',
        'https://placehold.co/600x800/5b21b6/ffffff?text=Elegant+Evening+Dress+Back'
      ],
      category: 'Dresses',
      brand: 'Fashionista',
      rating: 4.5,
      stock: 12,
      variants: [
        { id: 'var1', size: 'S', price: 149.99 },
        { id: 'var2', size: 'M', price: 149.99 },
        { id: 'var3', size: 'L', price: 149.99 }
      ],
      tags: ['evening', 'elegant', 'new']
    },
    {
      id: 'prod2',
      name: 'Casual Summer Shirt',
      description: 'Lightweight and breathable shirt for everyday comfort.',
      price: 39.99,
      images: [
        'https://placehold.co/600x800/7c3aed/ffffff?text=Casual+Summer+Shirt+Front',
        'https://placehold.co/600x800/5b21b6/ffffff?text=Casual+Summer+Shirt+Back'
      ],
      category: 'Shirts',
      brand: 'Sunshine Apparel',
      rating: 4.0,
      stock: 30,
      variants: [
        { id: 'var4', size: 'M', price: 39.99 },
        { id: 'var5', size: 'L', price: 39.99 }
      ],
      tags: ['casual', 'summer', 'cotton']
    }
  ];

  // DOM Elements
  const registerForm = document.getElementById('register-form');
  const loginForm = document.getElementById('login-form');
  const registerError = document.getElementById('register-error');
  const loginError = document.getElementById('login-error');
  const authSection = document.getElementById('auth-section');
  const productsSection = document.getElementById('products-section');
  const productsGrid = document.getElementById('products-grid');
  const navUser = document.getElementById('nav-user');
  const userInfoSpan = document.getElementById('user-info');
  const logoutBtn = document.getElementById('logout-btn');
  const enquiryModalBackdrop = document.getElementById('enquiry-modal-backdrop');
  const modalCloseBtn = document.getElementById('modal-close-btn');
  const enquiryForm = document.getElementById('enquiry-form');
  const enquiryError = document.getElementById('enquiry-error');
  const enquiryMessageInput = document.getElementById('enquiry-message');
  const enquiryProductName = document.getElementById('enquiry-product-name');

  let currentEnquiryProductId = null;

  // Toggle auth forms
  function showRegisterForm() {
    registerForm.classList.remove('hidden');
    registerForm.setAttribute('aria-hidden', 'false');
    loginForm.classList.add('hidden');
    loginForm.setAttribute('aria-hidden', 'true');
    clearErrors();
  }
  function showLoginForm() {
    loginForm.classList.remove('hidden');
    loginForm.setAttribute('aria-hidden', 'false');
    registerForm.classList.add('hidden');
    registerForm.setAttribute('aria-hidden', 'true');
    clearErrors();
  }

  document.getElementById('show-login').addEventListener('click', e => {
    e.preventDefault();
    showLoginForm();
  });

  document.getElementById('show-register').addEventListener('click', e => {
    e.preventDefault();
    showRegisterForm();
  });

  // Clear error messages
  function clearErrors() {
    registerError.textContent = '';
    loginError.textContent = '';
    enquiryError.textContent = '';
  }

  // Validate email format regex (simple)
  function isValidEmail(email) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
  }

  // Register handler
  registerForm.addEventListener('submit', e => {
    e.preventDefault();
    clearErrors();

    const name = registerForm['name'].value.trim();
    const email = registerForm['email'].value.trim().toLowerCase();
    const password = registerForm['password'].value;

    // Validations
    if (!name) {
      registerError.textContent = 'Name is required.';
      return;
    }
    if (!email || !isValidEmail(email)) {
      registerError.textContent = 'A valid email is required.';
      return;
    }
    if (password.length < 6) {
      registerError.textContent = 'Password must be at least 6 characters.';
      return;
    }

    const users = getStoredUsers();

    if (users.some(u => u.email === email)) {
      registerError.textContent = 'An account with this email already exists.';
      return;
    }

    const hashedPassword = simpleHash(password);

    const newUser = {
      id: "user_" + Math.random().toString(36).substr(2,9),
      name,
      email,
      passwordHash: hashedPassword,
      enquiries: []
    };

    users.push(newUser);
    setStoredUsers(users);
    setLoggedInUser({ id: newUser.id, name: newUser.name, email: newUser.email });

    showFrontPage();
  });

  // Login handler
  loginForm.addEventListener('submit', e => {
    e.preventDefault();
    clearErrors();

    const email = loginForm['email'].value.trim().toLowerCase();
    const password = loginForm['password'].value;

    if (!email || !isValidEmail(email)) {
      loginError.textContent = 'A valid email is required.';
      return;
    }
    if (!password) {
      loginError.textContent = 'Password is required.';
      return;
    }

    const users = getStoredUsers();

    const user = users.find(u => u.email === email);
    if (!user) {
      loginError.textContent = 'Invalid email or password.';
      return;
    }
    const hashedPassword = simpleHash(password);
    if (hashedPassword !== user.passwordHash) {
      loginError.textContent = 'Invalid email or password.';
      return;
    }

    setLoggedInUser({ id: user.id, name: user.name, email: user.email });
    showFrontPage();
  });

  function showFrontPage() {
    authSection.classList.add('hidden');
    productsSection.classList.remove('hidden');
    navUser.classList.remove('hidden');

    const user = getLoggedInUser();
    if (user) {
      userInfoSpan.textContent = `Welcome, ${user.name}`;
    }

    renderProducts();
  }

  function showLoginPage() {
    authSection.classList.remove('hidden');
    productsSection.classList.add('hidden');
    navUser.classList.add('hidden');
    clearErrors();
    showLoginForm();
  }

  // Logout
  logoutBtn.addEventListener('click', () => {
    clearLoggedInUser();
    showLoginPage();
  });

  // Render products grid
  function renderProducts() {
    productsGrid.innerHTML = '';
    products.forEach(product => {
      const card = document.createElement('article');
      card.setAttribute('role', 'listitem');
      card.className = 'product-card';

      const imageUrl = product.images[0] || 'https://placehold.co/600x800/7c3aed/ffffff?text=No+Image';

      card.innerHTML = `
        <img src="${imageUrl}" alt="Image of ${product.name}" class="product-image" loading="lazy" />
        <h3 class="product-name">${product.name}</h3>
        <p class="product-desc">${product.description}</p>
        <div class="product-price">\u0024${product.price.toFixed(2)}</div>
        <button class="enquiry-button" aria-label="Enquire about ${product.name}" data-prod-id="${product.id}">Make Enquiry</button>
      `;

      productsGrid.appendChild(card);
    });

    // Add enquiry button handlers
    document.querySelectorAll('.enquiry-button').forEach(button => {
      button.addEventListener('click', e => {
        const prodId = e.currentTarget.getAttribute('data-prod-id');
        openEnquiryModal(prodId);
      });
    });
  }

  // Open enquiry modal for product
  function openEnquiryModal(productId) {
    const user = getLoggedInUser();
    if (!user) {
      alert('You must be logged in to make enquiries.');
      return;
    }

    const product = products.find(p => p.id === productId);
    if (!product) return;

    currentEnquiryProductId = productId;
    enquiryProductName.textContent = product.name;
    enquiryMessageInput.value = '';
    enquiryError.textContent = '';
    enquiryModalBackdrop.classList.remove('hidden');

    enquiryMessageInput.focus();
  }

  // Close modal
  modalCloseBtn.addEventListener('click', closeEnquiryModal);
  enquiryModalBackdrop.addEventListener('click', e => {
    if (e.target === enquiryModalBackdrop) {
      closeEnquiryModal();
    }
  });
  document.addEventListener('keydown', e => {
    if (e.key === 'Escape' && !enquiryModalBackdrop.classList.contains('hidden')) {
      closeEnquiryModal();
    }
  });
  function closeEnquiryModal() {
    enquiryModalBackdrop.classList.add('hidden');
    currentEnquiryProductId = null;
  }

  // Enquiry form submit
  enquiryForm.addEventListener('submit', e => {
    e.preventDefault();
    enquiryError.textContent = '';
    if (!currentEnquiryProductId) {
      enquiryError.textContent = 'No product selected.';
      return;
    }
    const message = enquiryMessageInput.value.trim();
    if (message.length < 10) {
      enquiryError.textContent = 'Message must be at least 10 characters.';
      return;
    }

    // Save enquiry in localStorage
    const user = getLoggedInUser();
    if (!user) {
      enquiryError.textContent = 'You must be logged in to send an enquiry.';
      return;
    }

    const enquiries = getStoredEnquiries();

    const newEnquiry = {
      id: 'enq_' + Math.random().toString(36).substr(2, 9),
      userId: user.id,
      productId: currentEnquiryProductId,
      message,
      createdAt: new Date().toISOString()
    };

    enquiries.push(newEnquiry);
    setStoredEnquiries(enquiries);
    closeEnquiryModal();

    alert('Your enquiry has been sent. We will get back to you soon!');
  });

  // On page load, check if user is logged in
  window.addEventListener('load', () => {
    const user = getLoggedInUser();
    if (user) {
      showFrontPage();
    } else {
      showLoginPage();
    }
  });
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Fashion Website - Account & Products</title>
<!-- Google Material Icons -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
<style>
  /* Modern Web Design Standards */
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    font-family: 'Inter', sans-serif;
    background: linear-gradient(135deg, #5902ef, #d3dfe6);
    color: #fff;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    overflow-x: hidden;
  }

  header {
    background: rgba(39, 39, 42, 0.9);
    backdrop-filter: blur(12px);
    padding: 1rem 2rem;
    position: sticky;
    top: 0;
    z-index: 1000;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  header .logo {
    font-weight: 700;
    font-size: 1.5rem;
    background: linear-gradient(45deg, #c084fc, #14b8a6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    user-select: none;
  }

  nav .material-icons {
    cursor: pointer;
    font-size: 2rem;
    vertical-align: middle;
  }

  main {
    flex-grow: 1;
    padding: 2rem;
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
  }

  .hidden {
    display: none !important;
  }

  /* Auth forms styling */

  .auth-container {
    max-width: 400px;
    margin: 5rem auto;
    background: rgba(255 255 255 / 0.07);
    padding: 2rem;
    border-radius: 16px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.25);
  }

  .auth-container h2 {
    margin-bottom: 1.5rem;
    font-weight: 700;
    text-align: center;
    font-size: 1.75rem;
  }

  label {
    display: block;
    margin-bottom: 0.25rem;
    font-weight: 600;
    font-size: 0.9rem;
  }

  input[type="email"],
  input[type="password"],
  input[type="text"] {
    width: 100%;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    border: none;
    border-radius: 12px;
    margin-bottom: 1rem;
    background: rgba(255 255 255 / 0.15);
    color: white;
    transition: background-color 0.3s ease;
  }

  input[type="email"]:focus,
  input[type="password"]:focus,
  input[type="text"]:focus {
    background: rgba(255 255 255 / 0.28);
    outline: none;
  }

  button {
    width: 100%;
    padding: 0.85rem;
    font-weight: 700;
    font-size: 1rem;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    color: #fff;
    background: linear-gradient(135deg, #a78bfa, #14b8a6);
    box-shadow: 0 8px 20px rgba(101, 52, 255, 0.35);
    transition: all 0.3s ease;
  }

  button:hover, button:focus {
    background: linear-gradient(135deg, #8533ff, #0d9182);
    box-shadow: 0 10px 30px rgba(101, 52, 255, 0.6);
  }

  .toggle-auth {
    margin-top: 1rem;
    text-align: center;
    font-size: 0.9rem;
  }

  .toggle-auth a {
    color: #c4b5fd;
    cursor: pointer;
    text-decoration: underline;
  }

  .error-message {
    color: #ff6b6b;
    font-weight: 600;
    margin-bottom: 1rem;
    text-align: center;
  }

  /* Products Grid */

  .products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(280px,1fr));
    gap: 2rem;
  }

  .product-card {
    background: rgba(255 255 255 / 0.05);
    border-radius: 20px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.3);
    padding: 1rem;
    display: flex;
    flex-direction: column;
    transition: transform 0.3s ease;
  }

  .product-card:hover {
    transform: translateY(-6px);
  }

  .product-image {
    width: 100%;
    aspect-ratio: 3 / 4;
    border-radius: 16px;
    object-fit: cover;
    margin-bottom: 1rem;
    box-shadow: 0 4px 15px rgba(124, 58, 237, 0.35);
  }

  .product-name {
    font-weight: 700;
    font-size: 1.2rem;
    margin-bottom: 0.4rem;
    color: #e0e7ff;
  }

  .product-desc {
    flex-grow: 1;
    font-size: 0.95rem;
    color: #cbd5e1;
    margin-bottom: 0.8rem;
  }

  .product-price {
    font-weight: 700;
    font-size: 1.1rem;
    color: #c084fc;
    margin-bottom: 0.6rem;
  }

  .enquiry-button {
    align-self: stretch;
    padding: 0.7rem;
    border-radius: 12px;
    border: none;
    background: #7c3aed;
    color: #f3f4f6;
    font-weight: 700;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .enquiry-button:hover, .enquiry-button:focus {
    background: #5b21b6;
  }

  /* Enquiry modal */

  .modal-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
  }

  .modal {
    width: 90%;
    max-width: 480px;
    background: rgba(255 255 255 / 0.1);
    padding: 2rem;
    border-radius: 24px;
    box-shadow: 0 8px 30px rgba(124, 58, 237, 0.6);
    position: relative;
    color: #fff;
    backdrop-filter: blur(20px);
  }

  .modal h3 {
    margin-top: 0;
    margin-bottom: 1rem;
    font-weight: 700;
  }

  .modal label {
    color: #ddd6fe;
  }

  .modal textarea {
    width: 100%;
    min-height: 100px;
    margin-bottom: 1rem;
    padding: 1rem;
    border-radius: 16px;
    border: none;
    background: rgba(255 255 255 / 0.15);
    color: #e0e7ff;
    resize: vertical;
    font-size: 1rem;
  }

  .modal textarea:focus {
    background: rgba(255 255 255 / 0.3);
    outline: none;
  }

  .modal-close {
    position: absolute;
    top: 12px;
    right: 12px;
    background: transparent;
    border: none;
    color: #c084fc;
    font-size: 2rem;
    cursor: pointer;
  }

  /* User info & logout button */

  .user-info {
    display: flex;
    align-items: center;
    gap: 1rem;
    font-weight: 600;
  }

  .btn-logout {
    background: #db2777;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    padding: 0.4rem 1rem;
    font-weight: 700;
    color: white;
    transition: background-color 0.3s ease;
  }

  .btn-logout:hover, .btn-logout:focus {
    background: #be185d;
  }

  /* Responsive */

  @media (max-width: 480px) {
    .auth-container {
      margin: 3rem 1rem;
    }
  }
</style>
</head>
<body>
<header>
  <div class="logo" aria-label="Fashion website logo">Fashion Hub</div>
  <nav id="nav-user" class="hidden" aria-live="polite">
    <span class="user-info" id="user-info"></span>
    <button class="btn-logout" id="logout-btn" aria-label="Logout">Logout</button>
  </nav>
</header>
<main>

  <!-- User Registration & Login Forms -->
  <section id="auth-section" class="auth-container" aria-live="polite" aria-label="User authentication forms">

    <form id="register-form" class="auth-form" aria-hidden="false" autocomplete="off" novalidate>
      <h2>Create Account</h2>
      <div class="error-message" id="register-error" role="alert" aria-live="assertive"></div>
      <label for="register-name">Name</label>
      <input type="text" id="register-name" name="name" required autocomplete="name" />
      <label for="register-email">Email</label>
      <input type="email" id="register-email" name="email" required autocomplete="email" />
      <label for="register-password">Password</label>
      <input type="password" id="register-password" name="password" required autocomplete="new-password" minlength="6" />
      <button type="submit">Register</button>
      <div class="toggle-auth">
        Already have an account? <a href="#" id="show-login">Log in</a>
      </div>
    </form>

    <form id="login-form" class="auth-form hidden" aria-hidden="true" autocomplete="off" novalidate>
      <h2>Log In</h2>
      <div class="error-message" id="login-error" role="alert" aria-live="assertive"></div>
      <label for="login-email">Email</label>
      <input type="email" id="login-email" name="email" required autocomplete="email" />
      <label for="login-password">Password</label>
      <input type="password" id="login-password" name="password" required autocomplete="current-password" />
      <button type="submit">Login</button>
      <div class="toggle-auth">
        Need an account? <a href="#" id="show-register">Register</a>
      </div>
    </form>

  </section>

  <!-- Front Page with Products -->
  <section id="products-section" class="hidden" aria-label="Product catalog">
    <h2 style="text-align:center; margin-bottom:2rem; font-weight:700; color:#ede9fe;">Explore Our Latest Fashion</h2>
    <div class="products-grid" id="products-grid" role="list"></div>
  </section>

  <!-- Enquiry Modal -->
  <div id="enquiry-modal-backdrop" class="modal-backdrop hidden" role="dialog" aria-modal="true" aria-labelledby="enquiry-modal-title">
    <div class="modal">
      <button class="modal-close" aria-label="Close enquiry form" id="modal-close-btn">&times;</button>
      <h3 id="enquiry-modal-title">Product Enquiry</h3>
      <p id="enquiry-product-name" style="font-weight:600; margin-bottom:1rem;"></p>
      <form id="enquiry-form" novalidate>
        <label for="enquiry-message">Your message</label>
        <textarea id="enquiry-message" name="message" required minlength="10" placeholder="Ask about sizes, availability, or anything else..."></textarea>
        <div class="error-message" id="enquiry-error" role="alert" aria-live="assertive"></div>
        <button type="submit">Send Enquiry</button>
      </form>
    </div>
  </div>

</main>

<script>
  // Utility to get/set users in localStorage
  const STORAGE_USERS_KEY = 'fashion_users';
  const STORAGE_LOGGED_USER_KEY = 'fashion_logged_in_user';
  const STORAGE_ENQUIRIES_KEY = 'fashion_enquiries';

  // Load users array from storage (or empty array)
  function getStoredUsers() {
    return JSON.parse(localStorage.getItem(STORAGE_USERS_KEY) || '[]');
  }
  // Save users array to storage
  function setStoredUsers(users) {
    localStorage.setItem(STORAGE_USERS_KEY, JSON.stringify(users));
  }

  // Save logged-in user (minimal info) to storage
  function setLoggedInUser(user) {
    localStorage.setItem(STORAGE_LOGGED_USER_KEY, JSON.stringify(user));
  }
  function getLoggedInUser() {
    return JSON.parse(localStorage.getItem(STORAGE_LOGGED_USER_KEY) || 'null');
  }
  function clearLoggedInUser() {
    localStorage.removeItem(STORAGE_LOGGED_USER_KEY);
  }

  // Save enquiries to storage
  function getStoredEnquiries() {
    return JSON.parse(localStorage.getItem(STORAGE_ENQUIRIES_KEY) || '[]');
  }
  function setStoredEnquiries(enquiries) {
    localStorage.setItem(STORAGE_ENQUIRIES_KEY, JSON.stringify(enquiries));
  }

  // Simple hashing function for password demonstration (not secure in production)
  function simpleHash(str) {
    // FNV-1a 32-bit hash for demo
    let hash = 2166136261;
    for (let i = 0; i < str.length; i++) {
      hash ^= str.charCodeAt(i);
      hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);
    }
    return (hash >>> 0).toString(16);
  }

  // Sample products defined here (match requirements)
  const products = [
    {
      id: 'prod1',
      name: 'Elegant Evening Dress',
      description: 'A stunning evening dress perfect for special occasions.',
      price: 149.99,
      images: [
        'https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/46386284-d2d8-484e-a020-08691fb7db83.png',
        'https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/798f0e5a-6ca8-49c1-b9b0-e24ebd06832a.png'
      ],
      category: 'Dresses',
      brand: 'Fashionista',
      rating: 4.5,
      stock: 12,
      variants: [
        { id: 'var1', size: 'S', price: 149.99 },
        { id: 'var2', size: 'M', price: 149.99 },
        { id: 'var3', size: 'L', price: 149.99 }
      ],
      tags: ['evening', 'elegant', 'new']
    },
    {
      id: 'prod2',
      name: 'Casual Summer Shirt',
      description: 'Lightweight and breathable shirt for everyday comfort.',
      price: 39.99,
      images: [
        'https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/673e7374-8cca-4f99-ac09-ac926b265093.png',
        'https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/d5c75180-9b50-4a4a-8c89-fa21b60b097f.png'
      ],
      category: 'Shirts',
      brand: 'Sunshine Apparel',
      rating: 4.0,
      stock: 30,
      variants: [
        { id: 'var4', size: 'M', price: 39.99 },
        { id: 'var5', size: 'L', price: 39.99 }
      ],
      tags: ['casual', 'summer', 'cotton']
    }
  ];

  // DOM Elements
  const registerForm = document.getElementById('register-form');
  const loginForm = document.getElementById('login-form');
  const registerError = document.getElementById('register-error');
  const loginError = document.getElementById('login-error');
  const authSection = document.getElementById('auth-section');
  const productsSection = document.getElementById('products-section');
  const productsGrid = document.getElementById('products-grid');
  const navUser = document.getElementById('nav-user');
  const userInfoSpan = document.getElementById('user-info');
  const logoutBtn = document.getElementById('logout-btn');
  const enquiryModalBackdrop = document.getElementById('enquiry-modal-backdrop');
  const modalCloseBtn = document.getElementById('modal-close-btn');
  const enquiryForm = document.getElementById('enquiry-form');
  const enquiryError = document.getElementById('enquiry-error');
  const enquiryMessageInput = document.getElementById('enquiry-message');
  const enquiryProductName = document.getElementById('enquiry-product-name');

  let currentEnquiryProductId = null;

  // Toggle auth forms
  function showRegisterForm() {
    registerForm.classList.remove('hidden');
    registerForm.setAttribute('aria-hidden', 'false');
    loginForm.classList.add('hidden');
    loginForm.setAttribute('aria-hidden', 'true');
    clearErrors();
  }
  function showLoginForm() {
    loginForm.classList.remove('hidden');
    loginForm.setAttribute('aria-hidden', 'false');
    registerForm.classList.add('hidden');
    registerForm.setAttribute('aria-hidden', 'true');
    clearErrors();
  }

  document.getElementById('show-login').addEventListener('click', e => {
    e.preventDefault();
    showLoginForm();
  });

  document.getElementById('show-register').addEventListener('click', e => {
    e.preventDefault();
    showRegisterForm();
  });

  // Clear error messages
  function clearErrors() {
    registerError.textContent = '';
    loginError.textContent = '';
    enquiryError.textContent = '';
  }

  // Validate email format regex (simple)
  function isValidEmail(email) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
  }

  // Register handler
  registerForm.addEventListener('submit', e => {
    e.preventDefault();
    clearErrors();

    const name = registerForm['name'].value.trim();
    const email = registerForm['email'].value.trim().toLowerCase();
    const password = registerForm['password'].value;

    // Validations
    if (!name) {
      registerError.textContent = 'Name is required.';
      return;
    }
    if (!email || !isValidEmail(email)) {
      registerError.textContent = 'A valid email is required.';
      return;
    }
    if (password.length < 6) {
      registerError.textContent = 'Password must be at least 6 characters.';
      return;
    }

    const users = getStoredUsers();

    if (users.some(u => u.email === email)) {
      registerError.textContent = 'An account with this email already exists.';
      return;
    }

    const hashedPassword = simpleHash(password);

    const newUser = {
      id: "user_" + Math.random().toString(36).substr(2,9),
      name,
      email,
      passwordHash: hashedPassword,
      enquiries: []
    };

    users.push(newUser);
    setStoredUsers(users);
    setLoggedInUser({ id: newUser.id, name: newUser.name, email: newUser.email });

    showFrontPage();
  });

  // Login handler
  loginForm.addEventListener('submit', e => {
    e.preventDefault();
    clearErrors();

    const email = loginForm['email'].value.trim().toLowerCase();
    const password = loginForm['password'].value;

    if (!email || !isValidEmail(email)) {
      loginError.textContent = 'A valid email is required.';
      return;
    }
    if (!password) {
      loginError.textContent = 'Password is required.';
      return;
    }

    const users = getStoredUsers();

    const user = users.find(u => u.email === email);
    if (!user) {
      loginError.textContent = 'Invalid email or password.';
      return;
    }
    const hashedPassword = simpleHash(password);
    if (hashedPassword !== user.passwordHash) {
      loginError.textContent = 'Invalid email or password.';
      return;
    }

    setLoggedInUser({ id: user.id, name: user.name, email: user.email });
    showFrontPage();
  });

  function showFrontPage() {
    authSection.classList.add('hidden');
    productsSection.classList.remove('hidden');
    navUser.classList.remove('hidden');

    const user = getLoggedInUser();
    if (user) {
      userInfoSpan.textContent = `Welcome, ${user.name}`;
    }

    renderProducts();
  }

  function showLoginPage() {
    authSection.classList.remove('hidden');
    productsSection.classList.add('hidden');
    navUser.classList.add('hidden');
    clearErrors();
    showLoginForm();
  }

  // Logout
  logoutBtn.addEventListener('click', () => {
    clearLoggedInUser();
    showLoginPage();
  });

  // Render products grid
  function renderProducts() {
    productsGrid.innerHTML = '';
    products.forEach(product => {
      const card = document.createElement('article');
      card.setAttribute('role', 'listitem');
      card.className = 'product-card';

      const imageUrl = product.images[0] || 'https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/d6b96319-ad97-4601-a68a-42e54b6126d2.png';

      card.innerHTML = `
        <img src="${imageUrl}" alt="Image of ${product.name}" class="product-image" loading="lazy" />
        <h3 class="product-name">${product.name}</h3>
        <p class="product-desc">${product.description}</p>
        <div class="product-price">\u0024${product.price.toFixed(2)}</div>
        <button class="enquiry-button" aria-label="Enquire about ${product.name}" data-prod-id="${product.id}">Make Enquiry</button>
      `;

      productsGrid.appendChild(card);
    });

    // Add enquiry button handlers
    document.querySelectorAll('.enquiry-button').forEach(button => {
      button.addEventListener('click', e => {
        const prodId = e.currentTarget.getAttribute('data-prod-id');
        openEnquiryModal(prodId);
      });
    });
  }

  // Open enquiry modal for product
  function openEnquiryModal(productId) {
    const user = getLoggedInUser();
    if (!user) {
      alert('You must be logged in to make enquiries.');
      return;
    }

    const product = products.find(p => p.id === productId);
    if (!product) return;

    currentEnquiryProductId = productId;
    enquiryProductName.textContent = product.name;
    enquiryMessageInput.value = '';
    enquiryError.textContent = '';
    enquiryModalBackdrop.classList.remove('hidden');

    enquiryMessageInput.focus();
  }

  // Close modal
  modalCloseBtn.addEventListener('click', closeEnquiryModal);
  enquiryModalBackdrop.addEventListener('click', e => {
    if (e.target === enquiryModalBackdrop) {
      closeEnquiryModal();
    }
  });
  document.addEventListener('keydown', e => {
    if (e.key === 'Escape' && !enquiryModalBackdrop.classList.contains('hidden')) {
      closeEnquiryModal();
    }
  });
  function closeEnquiryModal() {
    enquiryModalBackdrop.classList.add('hidden');
    currentEnquiryProductId = null;
  }

  // Enquiry form submit
  enquiryForm.addEventListener('submit', e => {
    e.preventDefault();
    enquiryError.textContent = '';
    if (!currentEnquiryProductId) {
      enquiryError.textContent = 'No product selected.';
      return;
    }
    const message = enquiryMessageInput.value.trim();
    if (message.length < 10) {
      enquiryError.textContent = 'Message must be at least 10 characters.';
      return;
    }

    // Save enquiry in localStorage
    const user = getLoggedInUser();
    if (!user) {
      enquiryError.textContent = 'You must be logged in to send an enquiry.';
      return;
    }

    const enquiries = getStoredEnquiries();

    const newEnquiry = {
      id: 'enq_' + Math.random().toString(36).substr(2, 9),
      userId: user.id,
      productId: currentEnquiryProductId,
      message,
      createdAt: new Date().toISOString()
    };

    enquiries.push(newEnquiry);
    setStoredEnquiries(enquiries);
    closeEnquiryModal();

    alert('Your enquiry has been sent. We will get back to you soon!');
  });

  // On page load, check if user is logged in
  window.addEventListener('load', () => {
    const user = getLoggedInUser();
    if (user) {
      showFrontPage();
    } else {
      showLoginPage();
    }
  });
</script>
</body>
</html>